server:
  port: 8081

spring:
  application:
    name: gateway
  main:
    web-application-type: reactive
  cloud:
    gateway:
      server:
        webflux:
          discovery:
            locator:
              enabled: true   # auto-creates a route per registered service in Eureka
              lower-case-service-id: true    # route IDs/paths are lowercased
      routes:    # shouldn't be needed as routes should auto create and register
        # Route auth + user endpoints through to user-service
        - id: user-service
          uri: lb://user-service
          predicates:
            - Path=/api/v1/auth/**, /api/v1/users/**      # Match both /api/v1/auth/** and /api/v1/users/**


eureka:
  client:
    service-url:
      # Default to localhost for non-Docker runs, but allow override via env
      defaultZone: ${EUREKA_DEFAULT_ZONE:http://localhost:8761/eureka}   # where Eureka server lives


management:
  endpoint:
    gateway:
      access: read-only   # <â€” REQUIRED on 2025.0.x or the endpoint 404s
  endpoints:
    web:
      exposure:
        include: health,info,gateway    # allows health & info actuator endpoints for simple checks